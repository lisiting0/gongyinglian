<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>物资库存</title>
		<meta name="keywords" content="物资库存">
		<meta name="description" content="物资库存">

		<link rel="shortcut icon" href="favicon.ico">
		<link href="../../css/bootstrap.min.css" rel="stylesheet">
		<link href="../../css/font-awesome.min.css" rel="stylesheet">
		<link href="../../css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
		<link href="../../css/animate.min.css" rel="stylesheet">
		<link href="../../css/style.min.css" rel="stylesheet">

	</head>

	<body class="gray-bg pd15">
		<div class="panel panel-default ibox float-e-margins border-bottom margin-bottom">
			<div class="panel-heading">
				<div class="row">
					<div class="col-sm-4 mgt2">查询条件</div>
					<div class="col-sm-8 text-right">
						<a class="collapse-link">
							<i class="fa fa-chevron-down"></i>
						</a>
					</div>
				</div>
			</div>

			<div class="panel-body d-serach ibox-content">
				<form id="form">
					<div class="row form-group">
						<label class="col-sm control-label">物料型号</label>
						<div class="col-sm-2">
							<input type="text" class="ui-textbox" name="material_number" />
						</div>
						<label class="col-sm control-label">物料名称</label>
						<div class="col-sm-2">
							<input type="text" class="ui-textbox" name="material_name" />
						</div>
						<label class="col-sm control-label">仓库</label>
						<div class="col-sm-2">
							<select name="warehouse">
								<option value=" ">所有</option>
								<option value="">配件耗材总仓</option>
								<option value="">普通仓库</option>
								<option value="">vip仓库</option>
							</select>
						</div>
					</div>
					<div class="row">
						<label class="col-sm control-label">库位</label>
						<div class="col-sm-2">
							<select name="warehouse_location">
								<option value=" ">所有</option>
								<option value="普通库位1">普通库位1</option>
								<option value="普通库位2">普通库位2</option>
							</select>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="panel-body">
			<div class="row text-right">
				<button class="btn btn-primary " type="button"><i class="fa fa-check"></i>&nbsp;查询</button>
				<!--<button class="btn btn-info " type="button" onclick="add('添加','material_inventory_list_edit.html')"><i class="fa fa-paste"></i>&nbsp;添加</button>-->
				<button class="btn btn-success " type="button"><i class="fa fa-download"></i>&nbsp;&nbsp;<span class="bold">导出</span></button>
			</div>
		</div>
		<div class="content-style0">
			<table id="exampleTableEvents"></table>
		</div>
		<script src="../../js/jquery.min.js"></script>
		<script src="../../js/bootstrap.min.js"></script>
		<script src="../../js/content.min.js"></script>
		<script src="../../js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
		<script src="../../js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
		<script src="../../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
		<script src="../../js/plugins/layer/layer.min.js"></script>
		<script src="../../js/ligerui.all.js"></script>
		<script src="../../js/js.js"></script>
		<script>
			$("#form").ligerForm({
				inputWidth: '',
				validate: true
			});
			var pageSize; //总页数
			var pageIndex; //当前第几页
			var table = $("#exampleTableEvents");
			table.bootstrapTable({
				//url: USER_INFO.SITE_URL + '/tp5/public/index.php/Admin/Admin/noteListDemo', //服务端需要返回rows与total字段
				data: [{
					id: 1,
					material_name: '老表',
					material_number: '160M6uagYXCL-02L1-12',
					unit: '件',
					size: '通码',
					color: '通色',
					image: 'watch1',
					warehouse: '配件耗材总仓',
					warehouse_location: '普通库位',
					existingStocks: 100,
					occupiedInventory: 100,
					remaining_inventory: 50,
					intransit_inventory: 50
				}, {
					id: 2,
					material_name: '表针',
					material_number: '586425826-02L1-12',
					unit: '件',
					size: '通码',
					color: '通色',
					image: 'watch1',
					warehouse: '配件耗材总仓',
					warehouse_location: '普通库位',
					existingStocks: 100,
					occupiedInventory: 100,
					remaining_inventory: 50,
					intransit_inventory: 50
				}, {
					id: 3,
					material_name: '表壳',
					material_number: '160M60LHDIGCL-02L1-12',
					unit: '件',
					size: '通码',
					color: '通色',
					image: 'watch1',
					warehouse: '配件耗材总仓',
					warehouse_location: '普通库位',
					existingStocks: 100,
					occupiedInventory: 100,
					remaining_inventory: 50,
					intransit_inventory: 50
				}, {
					id: 4,
					material_name: '表带',
					material_number: '160M60LYXCL-02L1-12',
					unit: '件',
					size: '通码',
					color: '通色',
					image: 'watch1',
					warehouse: '配件耗材总仓',
					warehouse_location: '普通库位',
					existingStocks: 100,
					occupiedInventory: 100,
					remaining_inventory: 50,
					intransit_inventory: 50
				}],
				pagination: true, //分页
				pageSize: 5, //每页多少条
				//method: 'post',
				//sidePagination: "server", //服务端处理分页
				columns: [{
						align: 'center',
						checkbox: true
					},
					{
						title: '编号',
						field: 'id',
						visible: false
					},
					{
						title: '物料型号',
						field: 'material_number'
					},
					{
						title: '物料名称',
						field: 'material_name'
					},
					{
						field: 'unit',
						title: '单位'
					},
					{
						field: 'size',
						title: '尺码'
					},
					{
						field: 'color',
						title: '颜色'
					},
					{
						field: 'image',
						title: '图片',
						formatter: function(value, row, index) {
							var str = '';
							str += '<a href="../../img/' + value + '.jpg" title="图片" data-gallery="" class="gallery-img"><img src="../../img/' + value + '.jpg"></a>';
							return str;
						}
					},
					{
						title: '仓库',
						field: 'warehouse'
					},
					{
						title: '库位',
						field: 'warehouse_location'
					},
					{
						title: '现有库存',
						field: 'existingStocks'
					},
					{
						title: '占用库存',
						field: 'occupiedInventory'
					},
					{
						title: '在途库存',
						field: 'intransit_inventory'
					},
					{
						title: '剩余库存',
						field: 'remaining_inventory'
					}
				],
				detailView: true,
				onExpandRow: function(index, row, $detail) {
					var childTable = $detail.html('<table id="childTable"></table>').find('table'); //创建子表
					$(childTable).bootstrapTable({
						columns: [{
								field: 'number_delivery',
								title: '出库单号',
							}, {
								field: 'delivery_date',
								title: '出库日期',
							},
							{
								field: 'operator',
								title: '操作员'
							},
							{
								field: 'outbound_quantity',
								title: '出库数量'
							},
							{
								field: 'outbound_type',
								title: '出库类型'
							},
							{
								field: 'remark',
								title: '备注'
							}
						],
						data: [{
								number_delivery: 'J2018000203',
								delivery_date: '2018-02-03 10:03',
								operator: '小鸡',
								outbound_quantity: 100,
								outbound_type: '组装',
								remark: ''
							},
							{
								number_delivery: 'J2018000303',
								delivery_date: '2018-03-03 13:03',
								operator: '季童薇',
								outbound_quantity: 2,
								outbound_type: '报损',
								remark: ''
							}, {
								number_delivery: 'J2017000203',
								delivery_date: '2017-02-03 10:03',
								operator: '小计',
								outbound_quantity: 100,
								outbound_type: '组装',
								remark: ''
							}
						]
					});
				},
				onDblClickRow: function(row, $element, field) { //row点击行的
					table.bootstrapTable('collapseAllRows');
					table.bootstrapTable('expandRow', (row.id - 1));
				},
				onClickRow: function(row, $element, field) { //row点击行的
					table.bootstrapTable('collapseRow', (row.id - 1));
				},
				queryParams: function(params) {
					var form = liger.get("form");
					var data = form.getData();
					var temp = {
						pageSize: params.limit, //页面大小
						pageIndex: (params.offset / params.limit) + 1, //页码
						sort: params.sort, //排序列名
						sortOrder: params.order //排位命令（desc，asc）
					};
					mergeObj(temp, data); //合并对象
					pageSize = temp.pageSize;
					pageIndex = temp.pageIndex;
					return temp;
				}
			});

			function serach() {
				table.bootstrapTable('refresh');
			}
		</script>

	</body>

</html>